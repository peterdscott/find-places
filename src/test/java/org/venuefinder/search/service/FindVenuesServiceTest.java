/**
 * 
 */
package org.venuefinder.search.service;

import static org.junit.Assert.*;

import org.eclipse.jetty.http.HttpStatus;
import org.junit.Before;
import org.junit.ClassRule;
import org.junit.Rule;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.venuefinder.search.config.TestApplicationConfig;
import org.venuefinder.search.domain.response.FindVenuesErrorResponse;
import org.venuefinder.search.domain.response.FindVenuesResponse;
import org.venuefinder.search.domain.searchrequest.FindVenuesSearchRequest;
import org.venuefinder.search.exception.FindVenuesSearchException;

import com.github.tomakehurst.wiremock.junit.WireMockClassRule;
import static com.github.tomakehurst.wiremock.client.WireMock.*;

/**
 * @author peterscott
 *
 */
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes= {TestApplicationConfig.class})
@SpringBootTest
public class FindVenuesServiceTest {

    @Autowired
    IFindVenuesService findVenuesService;

    @ClassRule
    public static WireMockClassRule wireMockRule = new WireMockClassRule(8089);

    @Rule
    public WireMockClassRule instanceRule = wireMockRule;
    
    private FindVenuesSearchRequest mockFindVenuesSearchRequest;
    
    /**
     * @throws java.lang.Exception
     */
    @Before
    public void setUp() throws Exception {
    }

    /**
     * This is provided as an example. A production version would check every 
     * element in the response, for example for the venues by reading expected
     * values from a text file into a List of expected venue details and 
     * iterating through the list using a loop and an index variable. 
     */
    @Test
    public void placeNameTest() {
        mockFindVenuesSearchRequest = new FindVenuesSearchRequest("woking", "51.31", "-0.56", "food", "1000");
        wireMockRule.stubFor(any(urlPathEqualTo("/v2/venues/explore"))
                .willReturn(aResponse()
                        .withHeader("Content-Type", "text/json")
                        .withStatus(200)
                        .withBody("{\"meta\":{\"code\":200,\"requestId\":\"5ad329521ed2190f8eee071c\"},\"response\":{\"suggestedFilters\":{\"header\":\"Tap to show:\",\"filters\":[{\"name\":\"Open now\",\"key\":\"openNow\"}]},\"headerLocation\":\"Woking\",\"headerFullLocation\":\"Woking\",\"headerLocationGranularity\":\"city\",\"query\":\"food\",\"totalResults\":25,\"suggestedBounds\":{\"ne\":{\"lat\":51.319000009000014,\"lng\":-0.5456293193672963},\"sw\":{\"lat\":51.30099999099999,\"lng\":-0.5743706806327038}},\"groups\":[{\"type\":\"Recommended Places\",\"name\":\"recommended\",\"items\":[{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"54da6721498ea2645916ce3c\",\"name\":\"Soya\",\"location\":{\"address\":\"5 Goldsworth Rd\",\"lat\":51.31749538686157,\"lng\":-0.5611387593732137,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31749538686157,\"lng\":-0.5611387593732137}],\"distance\":838,\"postalCode\":\"GU21 6JY\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"5 Goldsworth Rd\",\"Woking\",\"Surrey\",\"GU21 6JY\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d113941735\",\"name\":\"Korean Restaurant\",\"pluralName\":\"Korean Restaurants\",\"shortName\":\"Korean\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/korean_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-54da6721498ea2645916ce3c-0\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"51390a68e4b05fc943618546\",\"name\":\"Rayslndian\",\"location\":{\"address\":\"8 Station Approach\",\"lat\":51.317111775006495,\"lng\":-0.5592807761527054,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.317111775006495,\"lng\":-0.5592807761527054}],\"distance\":793,\"postalCode\":\"GU22 7PB\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"8 Station Approach\",\"Woking\",\"Surrey\",\"GU22 7PB\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d10f941735\",\"name\":\"Indian Restaurant\",\"pluralName\":\"Indian Restaurants\",\"shortName\":\"Indian\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/indian_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-51390a68e4b05fc943618546-1\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"551c1f90498ee681e9787e87\",\"name\":\"Las Iguanas\",\"location\":{\"address\":\"21-25 Commercial Way\",\"lat\":51.31864111648963,\"lng\":-0.5591427513778864,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31864111648963,\"lng\":-0.5591427513778864}],\"distance\":963,\"postalCode\":\"GU21 6XR\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"21-25 Commercial Way\",\"Woking\",\"Surrey\",\"GU21 6XR\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d1be941735\",\"name\":\"Latin American Restaurant\",\"pluralName\":\"Latin American Restaurants\",\"shortName\":\"Latin American\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/latinamerican_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-551c1f90498ee681e9787e87-2\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"4fc27126e4b0117b73fb8aef\",\"name\":\"Al Pasha\",\"location\":{\"address\":\"29 Goldsworth Rd\",\"lat\":51.31727709334756,\"lng\":-0.5621784878041542,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31727709334756,\"lng\":-0.5621784878041542}],\"distance\":824,\"postalCode\":\"GU21 6JT\",\"cc\":\"GB\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"29 Goldsworth Rd\",\"GU21 6JT\",\"United Kingdom\"]},\"categories\":[{\"id\":\"5283c7b4e4b094cb91ec88d7\",\"name\":\"Kebab Restaurant\",\"pluralName\":\"Kebab Restaurants\",\"shortName\":\"Kebab\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/middleeastern_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-4fc27126e4b0117b73fb8aef-3\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"4fdf63f06b742eb7be87516d\",\"name\":\"Araceli's\",\"location\":{\"address\":\"16 Commercial Way\",\"lat\":51.318682726254906,\"lng\":-0.5590260606464501,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.318682726254906,\"lng\":-0.5590260606464501}],\"distance\":968,\"postalCode\":\"GU21 6ET\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"16 Commercial Way\",\"Woking\",\"Surrey\",\"GU21 6ET\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d1c1941735\",\"name\":\"Mexican Restaurant\",\"pluralName\":\"Mexican Restaurants\",\"shortName\":\"Mexican\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/mexican_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-4fdf63f06b742eb7be87516d-4\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"4b76aab8f964a52054572ee3\",\"name\":\"So's Kitchen\",\"location\":{\"address\":\"1 White Rose Ln\",\"lat\":51.31811846248639,\"lng\":-0.5567211649260386,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31811846248639,\"lng\":-0.5567211649260386}],\"distance\":932,\"postalCode\":\"GU22 7AA\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"1 White Rose Ln\",\"Woking\",\"Surrey\",\"GU22 7AA\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d145941735\",\"name\":\"Chinese Restaurant\",\"pluralName\":\"Chinese Restaurants\",\"shortName\":\"Chinese\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/asian_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-4b76aab8f964a52054572ee3-5\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"4c5454adf5f3d13a13eef9f9\",\"name\":\"L'Aroma\",\"location\":{\"address\":\"16 High St\",\"lat\":51.31830631507594,\"lng\":-0.5585402960800547,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31830631507594,\"lng\":-0.5585402960800547}],\"distance\":930,\"postalCode\":\"GU21 6BW\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"16 High St\",\"Woking\",\"Surrey\",\"GU21 6BW\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d110941735\",\"name\":\"Italian Restaurant\",\"pluralName\":\"Italian Restaurants\",\"shortName\":\"Italian\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/italian_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-4c5454adf5f3d13a13eef9f9-6\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"548467d7498e74856d3c346d\",\"name\":\"Bill's Restaurant\",\"location\":{\"address\":\"27 Commercial Way\",\"lat\":51.31872967518849,\"lng\":-0.5590685068708869,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31872967518849,\"lng\":-0.5590685068708869}],\"distance\":973,\"postalCode\":\"GU21 6XR\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"27 Commercial Way\",\"Woking\",\"Surrey\",\"GU21 6XR\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d143941735\",\"name\":\"Breakfast Spot\",\"pluralName\":\"Breakfast Spots\",\"shortName\":\"Breakfast\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/breakfast_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-548467d7498e74856d3c346d-7\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"4bf18a74d39ad13a085caa0e\",\"name\":\"Charlie Choys \\/ Lotus Lounge\",\"location\":{\"address\":\"Units 12-14, The Centrium, Victoria Rd\",\"lat\":51.316844331809975,\"lng\":-0.5599099340794252,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.316844331809975,\"lng\":-0.5599099340794252}],\"distance\":761,\"postalCode\":\"GU22 7PB\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"Units 12-14, The Centrium, Victoria Rd\",\"Woking\",\"Surrey\",\"GU22 7PB\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d142941735\",\"name\":\"Asian Restaurant\",\"pluralName\":\"Asian Restaurants\",\"shortName\":\"Asian\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/asian_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-4bf18a74d39ad13a085caa0e-8\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"4bd0959e462cb713ffa8d807\",\"name\":\"PizzaExpress\",\"location\":{\"address\":\"65-67 Goldsworth Rd\",\"lat\":51.31731617696323,\"lng\":-0.5643966704355536,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31731617696323,\"lng\":-0.5643966704355536}],\"distance\":869,\"postalCode\":\"GU21 6LJ\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"65-67 Goldsworth Rd\",\"Woking\",\"Surrey\",\"GU21 6LJ\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d1ca941735\",\"name\":\"Pizza Place\",\"pluralName\":\"Pizza Places\",\"shortName\":\"Pizza\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/pizza_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-4bd0959e462cb713ffa8d807-9\"}]}]}}")));
        try {
            FindVenuesResponse mockFindVenuesResponse = findVenuesService.searchVenues(mockFindVenuesSearchRequest);
            assertEquals(mockFindVenuesResponse.getPlaceName(), "Woking");
            assertEquals(mockFindVenuesResponse.getTotalFound(), "10");
            assertEquals(mockFindVenuesResponse.getVenues().get(0).getName(), "Soya");
            assertEquals(mockFindVenuesResponse.getVenues().get(0).getAddress(), "5 Goldsworth Rd");
            assertEquals(mockFindVenuesResponse.getVenues().get(0).getPostalCode(), "GU21 6JY");
        } catch (FindVenuesSearchException fvse) {
            fail(fvse.getHttpStatusCode().toString() + " " + fvse.getMessage());
        }
    }

    /**
     * This is provided as an example. A production version would check every 
     * element in the response, for example for the venues by reading expected
     * values from a text file into a List of expected venue details and 
     * iterating through the list using a loop and an index variable. 
     */
    @Test
    public void placeLatitudeLongitudeTest() {
        mockFindVenuesSearchRequest = new FindVenuesSearchRequest("", "51.31", "-0.56", "food", "1000");
        wireMockRule.stubFor(any(urlPathEqualTo("/v2/venues/explore"))
                .willReturn(aResponse()
                        .withHeader("Content-Type", "text/json")
                        .withStatus(200)
                        .withBody("{\"meta\":{\"code\":200,\"requestId\":\"5ad329521ed2190f8eee071c\"},\"response\":{\"suggestedFilters\":{\"header\":\"Tap to show:\",\"filters\":[{\"name\":\"Open now\",\"key\":\"openNow\"}]},\"headerLocation\":\"Woking\",\"headerFullLocation\":\"Woking\",\"headerLocationGranularity\":\"city\",\"query\":\"food\",\"totalResults\":25,\"suggestedBounds\":{\"ne\":{\"lat\":51.319000009000014,\"lng\":-0.5456293193672963},\"sw\":{\"lat\":51.30099999099999,\"lng\":-0.5743706806327038}},\"groups\":[{\"type\":\"Recommended Places\",\"name\":\"recommended\",\"items\":[{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"54da6721498ea2645916ce3c\",\"name\":\"Green Dragon\",\"location\":{\"address\":\"6 Goldsworth Rd\",\"lat\":51.31749538686157,\"lng\":-0.5611387593732137,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31749538686157,\"lng\":-0.5611387593732137}],\"distance\":838,\"postalCode\":\"GU21 6JY\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"5 Goldsworth Rd\",\"Woking\",\"Surrey\",\"GU21 6JY\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d113941735\",\"name\":\"Korean Restaurant\",\"pluralName\":\"Korean Restaurants\",\"shortName\":\"Korean\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/korean_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-54da6721498ea2645916ce3c-0\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"51390a68e4b05fc943618546\",\"name\":\"Rayslndian\",\"location\":{\"address\":\"8 Station Approach\",\"lat\":51.317111775006495,\"lng\":-0.5592807761527054,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.317111775006495,\"lng\":-0.5592807761527054}],\"distance\":793,\"postalCode\":\"GU22 7PB\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"8 Station Approach\",\"Woking\",\"Surrey\",\"GU22 7PB\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d10f941735\",\"name\":\"Indian Restaurant\",\"pluralName\":\"Indian Restaurants\",\"shortName\":\"Indian\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/indian_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-51390a68e4b05fc943618546-1\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"551c1f90498ee681e9787e87\",\"name\":\"Las Iguanas\",\"location\":{\"address\":\"21-25 Commercial Way\",\"lat\":51.31864111648963,\"lng\":-0.5591427513778864,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31864111648963,\"lng\":-0.5591427513778864}],\"distance\":963,\"postalCode\":\"GU21 6XR\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"21-25 Commercial Way\",\"Woking\",\"Surrey\",\"GU21 6XR\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d1be941735\",\"name\":\"Latin American Restaurant\",\"pluralName\":\"Latin American Restaurants\",\"shortName\":\"Latin American\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/latinamerican_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-551c1f90498ee681e9787e87-2\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"4fc27126e4b0117b73fb8aef\",\"name\":\"Al Pasha\",\"location\":{\"address\":\"29 Goldsworth Rd\",\"lat\":51.31727709334756,\"lng\":-0.5621784878041542,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31727709334756,\"lng\":-0.5621784878041542}],\"distance\":824,\"postalCode\":\"GU21 6JT\",\"cc\":\"GB\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"29 Goldsworth Rd\",\"GU21 6JT\",\"United Kingdom\"]},\"categories\":[{\"id\":\"5283c7b4e4b094cb91ec88d7\",\"name\":\"Kebab Restaurant\",\"pluralName\":\"Kebab Restaurants\",\"shortName\":\"Kebab\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/middleeastern_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-4fc27126e4b0117b73fb8aef-3\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"4fdf63f06b742eb7be87516d\",\"name\":\"Araceli's\",\"location\":{\"address\":\"16 Commercial Way\",\"lat\":51.318682726254906,\"lng\":-0.5590260606464501,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.318682726254906,\"lng\":-0.5590260606464501}],\"distance\":968,\"postalCode\":\"GU21 6ET\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"16 Commercial Way\",\"Woking\",\"Surrey\",\"GU21 6ET\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d1c1941735\",\"name\":\"Mexican Restaurant\",\"pluralName\":\"Mexican Restaurants\",\"shortName\":\"Mexican\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/mexican_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-4fdf63f06b742eb7be87516d-4\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"4b76aab8f964a52054572ee3\",\"name\":\"So's Kitchen\",\"location\":{\"address\":\"1 White Rose Ln\",\"lat\":51.31811846248639,\"lng\":-0.5567211649260386,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31811846248639,\"lng\":-0.5567211649260386}],\"distance\":932,\"postalCode\":\"GU22 7AA\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"1 White Rose Ln\",\"Woking\",\"Surrey\",\"GU22 7AA\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d145941735\",\"name\":\"Chinese Restaurant\",\"pluralName\":\"Chinese Restaurants\",\"shortName\":\"Chinese\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/asian_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-4b76aab8f964a52054572ee3-5\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"4c5454adf5f3d13a13eef9f9\",\"name\":\"L'Aroma\",\"location\":{\"address\":\"16 High St\",\"lat\":51.31830631507594,\"lng\":-0.5585402960800547,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31830631507594,\"lng\":-0.5585402960800547}],\"distance\":930,\"postalCode\":\"GU21 6BW\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"16 High St\",\"Woking\",\"Surrey\",\"GU21 6BW\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d110941735\",\"name\":\"Italian Restaurant\",\"pluralName\":\"Italian Restaurants\",\"shortName\":\"Italian\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/italian_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-4c5454adf5f3d13a13eef9f9-6\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"548467d7498e74856d3c346d\",\"name\":\"Bill's Restaurant\",\"location\":{\"address\":\"27 Commercial Way\",\"lat\":51.31872967518849,\"lng\":-0.5590685068708869,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31872967518849,\"lng\":-0.5590685068708869}],\"distance\":973,\"postalCode\":\"GU21 6XR\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"27 Commercial Way\",\"Woking\",\"Surrey\",\"GU21 6XR\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d143941735\",\"name\":\"Breakfast Spot\",\"pluralName\":\"Breakfast Spots\",\"shortName\":\"Breakfast\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/breakfast_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-548467d7498e74856d3c346d-7\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"4bf18a74d39ad13a085caa0e\",\"name\":\"Charlie Choys \\/ Lotus Lounge\",\"location\":{\"address\":\"Units 12-14, The Centrium, Victoria Rd\",\"lat\":51.316844331809975,\"lng\":-0.5599099340794252,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.316844331809975,\"lng\":-0.5599099340794252}],\"distance\":761,\"postalCode\":\"GU22 7PB\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"Units 12-14, The Centrium, Victoria Rd\",\"Woking\",\"Surrey\",\"GU22 7PB\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d142941735\",\"name\":\"Asian Restaurant\",\"pluralName\":\"Asian Restaurants\",\"shortName\":\"Asian\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/asian_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-4bf18a74d39ad13a085caa0e-8\"},{\"reasons\":{\"count\":0,\"items\":[{\"summary\":\"This spot is popular\",\"type\":\"general\",\"reasonName\":\"globalInteractionReason\"}]},\"venue\":{\"id\":\"4bd0959e462cb713ffa8d807\",\"name\":\"PizzaExpress\",\"location\":{\"address\":\"65-67 Goldsworth Rd\",\"lat\":51.31731617696323,\"lng\":-0.5643966704355536,\"labeledLatLngs\":[{\"label\":\"display\",\"lat\":51.31731617696323,\"lng\":-0.5643966704355536}],\"distance\":869,\"postalCode\":\"GU21 6LJ\",\"cc\":\"GB\",\"city\":\"Woking\",\"state\":\"Surrey\",\"country\":\"United Kingdom\",\"formattedAddress\":[\"65-67 Goldsworth Rd\",\"Woking\",\"Surrey\",\"GU21 6LJ\",\"United Kingdom\"]},\"categories\":[{\"id\":\"4bf58dd8d48988d1ca941735\",\"name\":\"Pizza Place\",\"pluralName\":\"Pizza Places\",\"shortName\":\"Pizza\",\"icon\":{\"prefix\":\"https:\\/\\/ss3.4sqi.net\\/img\\/categories_v2\\/food\\/pizza_\",\"suffix\":\".png\"},\"primary\":true}],\"photos\":{\"count\":0,\"groups\":[]}},\"referralId\":\"e-0-4bd0959e462cb713ffa8d807-9\"}]}]}}")));
        try {
            FindVenuesResponse mockFindVenuesResponse = findVenuesService.searchVenues(mockFindVenuesSearchRequest);
            assertEquals(mockFindVenuesResponse.getPlaceName(), "Woking");
            assertEquals(mockFindVenuesResponse.getTotalFound(), "10");
            assertEquals(mockFindVenuesResponse.getVenues().get(0).getName(), "Green Dragon");
            assertEquals(mockFindVenuesResponse.getVenues().get(0).getAddress(), "6 Goldsworth Rd");
            assertEquals(mockFindVenuesResponse.getVenues().get(0).getPostalCode(), "GU21 6JY");
        } catch (FindVenuesSearchException fvse) {
            fail(fvse.getHttpStatusCode().toString() + " " + fvse.getMessage());
        }
    }

}
